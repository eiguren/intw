# Makefile for postprocessing (PP)

VPATH=@QE2INTW_SRC_DIR@

QE_BUILD_DIR=@QE_BUILD_DIR@

include $(QE_BUILD_DIR)/make.inc

FFLAGS += @QE2INTW_FFLAGS@

DFLAGS += @QE2INTW_FPPFLAGS@

# location of needed modules and included files (if any)
MODFLAGS= $(BASEMOD_FLAGS) \
          $(MOD_FLAG)$(QE_BUILD_DIR)/PW/src \
          $(MOD_FLAG)$(QE_BUILD_DIR)/dft-d3/


PWOBJS = $(QE_BUILD_DIR)/PW/src/libpw.a
QEMODS = $(QE_BUILD_DIR)/Modules/libqemod.a $(QE_BUILD_DIR)/upflib/libupf.a $(QE_BUILD_DIR)/KS_Solvers/libks_solvers.a \
         $(QE_BUILD_DIR)/FFTXlib/libqefft.a $(QE_BUILD_DIR)/LAXlib/libqela.a $(QE_BUILD_DIR)/UtilXlib/libutil.a \
         $(QE_BUILD_DIR)/dft-d3/libdftd3qe.a

MODULES = $(PWOBJS) $(QEMODS)

all : pw2intw.x create_intw_q_dirs.x

pw2intw.x : pw2intw.o $(MODULES) $(LIBOBJS)
	$(LD) $(LDFLAGS) -o $@ \
		pw2intw.o $(MODULES) $(LIBOBJS) $(QELIBS)

create_intw_q_dirs.x : create_intw_q_dirs.o $(MODULES) $(LIBOBJS)
	$(LD) $(LDFLAGS) -o $@ \
		create_intw_q_dirs.o $(MODULES) $(LIBOBJS) $(QELIBS)


clean :
	rm -f *.x *.o *.mod
