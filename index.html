

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="description" content="Welcome to the documentation for the INTW project">
    <meta name="author" content="INTW group" >
    <link rel="icon" href="./favicon.png">

    <title> INTW </title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <!-- Font Awesome -->
    <link href="./css/fontawesome.min.css" rel="stylesheet">
    <link href="./css/brands.min.css" rel="stylesheet">
    <link href="./css/regular.min.css" rel="stylesheet">
    <link href="./css/solid.min.css" rel="stylesheet">
    <link href="./css/v4-font-face.min.css" rel="stylesheet">
    <link href="./css/v4-shims.min.css" rel="stylesheet">
    <!-- MathJax -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        TeX: { equationNumbers: { autoNumber: "AMS" } }
      });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async
            integrity="sha256-DViIOMYdwlM/axqoGDPeUyf0urLoHMN4QACBKyB58Uw=" crossorigin="anonymous"></script>
    <!-- Other scripts and stylesheets -->
    <link href="./css/local.css" rel="stylesheet">
    <link href="./css/pygments.css" rel="stylesheet">
    <script src="./js/svg-pan-zoom.min.js"></script>
  </head>

  <body>

    <!-- Fixed navbar -->
    <div class="container-fluid mb-sm-4 mb-xl-2">
      <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
        <div class="container">
          <a class="navbar-brand" href="./index.html">INTW </a>
          <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar"
                  aria-expanded="false" aria-controls="navbar" aria-label="Toggle navigation">
                  <span class="navbar-toggler-icon">
          </button>

          <div id="navbar" class="navbar-collapse collapse">
            <ul class="navbar-nav">
                <li class="nav-item"><a class="nav-link" href="page/index.html">User Guide</a></li>
                  <li class="nav-item">
                    <a class="nav-link" href="./lists/files.html">Source Files</a>
                  </li>
                <li class="nav-item">
                  <a class="nav-link" href="./lists/modules.html">Modules</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="./lists/procedures.html">Procedures</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="./lists/programs.html">Programs</a>
                </li>
            </ul>
              <div class="d-flex align-items-end flex-grow-1">
                <form action="./search.html" role="search" class="ms-auto">
                  <input type="text" class="form-control" aria-label="Search" placeholder="Search" name="q" id="tipue_search_input" autocomplete="off" required>
                </form>
              </div>
          </div><!--/.nav-collapse -->
        </div>
      </nav>
    </div>

    <div class="container">
  <!-- Main component for a primary marketing message or call to action -->
    <div class="p-5 mb-4 bg-light border rounded-3" id="jumbotron">
      <p>Welcome to the documentation for the INTW project</p>
        <p> Find us on&hellip;</p>
      <p>
        <a class="btn btn-lg btn-primary" href="https://github.com/eiguren/intw" role="button">GitHub</a>
        
        
        
        
      </p>
    </div>

      <div class="row" id='text'>
        <div class=col-md-8>
          <h1>INTW</h1>
          <div class="toc">
<ul>
<li><a href="#intw-project">INTW project</a><ul>
<li><a href="#compilation-notes">Compilation notes</a><ul>
<li><a href="#setting-a-specific-compiler-and-flags">Setting a specific compiler and flags</a></li>
</ul>
</li>
<li><a href="#dependencies">Dependencies</a><ul>
<li><a href="#blaslapack-required">BLAS/LAPACK (required)</a></li>
<li><a href="#spglib-required-to-use-siesta">Spglib (required to use SIESTA)</a></li>
<li><a href="#triangle-and-tetgen-optional">triangle and tetgen (optional)</a></li>
<li><a href="#openmp-optional">OpenMP (optional)</a></li>
<li><a href="#wannier90-optional">Wannier90 (optional)</a></li>
<li><a href="#python-3-optional">Python 3 (optional)</a></li>
</ul>
</li>
<li><a href="#test-suite">Test suite</a><ul>
<li><a href="#test-dependencies">Test dependencies</a><ul>
<li><a href="#python3-required">python3 (required)</a></li>
<li><a href="#wannier90-required-for-test_mmn-and-test_w902intw">Wannier90 (required for test_mmn and test_w902intw)</a></li>
<li><a href="#qe-or-siesta-required-for-test_matrix_elements-test_mmn-and-test_w902intw">QE or SIESTA (required for test_matrix_elements, test_mmn and test_w902intw)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<h1 id="intw-project">INTW project</h1>
<p><a href="https://github.com/eiguren/intw/releases"><img alt="GitHub release" src="https://img.shields.io/github/v/release/eiguren/intw?logo=github"></a>
<a href="https://github.com/eiguren/intw/blob/main/COPYING"><img alt="License" src="https://img.shields.io/github/license/eiguren/intw"></a>
<a href="https://eiguren.github.io/intw"><img alt="Documentation" src="https://img.shields.io/badge/documentation-https://eiguren.github.io/intw-brightgreen.svg"></a></p>
<p>INTW is a modular set of Fortran tools designed for advanced electronic structure calculations, helping researchers to create customized utilities for specific applications.</p>
<p>INTW implements a collection of functions and subroutines for computing various electron- and phonon-related properties, particularly standig out in the use of crystal symmetry to enhance efficiency, and it is capable of reading Density Functional Theory (DFT) results from both the plane-wave based <a href="https://www.quantum-espresso.org/">Quantum Espresso</a> code and from the localized basis set <a href="https://siesta-project.org/siesta/">SIESTA</a> code.</p>
<p>Additionally, INTW provides a set of ready-to-use utilities for calculating electron-phonon coupling matrix elements and Eliashberg functions, Wannier functions, elctron band structure and phonon dispersion interpolations, and Fermi surface triangulations.</p>
<h2 id="compilation-notes">Compilation notes</h2>
<p>To build INTW CMake (&gt;=3.12), <a href="https://cmake.org/cmake/help/latest/manual/cmake-generators.7.html">a supported build tool</a> like Makefile or Ninja and C and Fortran compilers are required. All of them can be easily installed in most systems.</p>
<p>Additionally, a supported version of <a href="https://www.quantum-espresso.org/">Quantum Espresso</a> or <a href="https://siesta-project.org/siesta/">SIESTA</a> (or both) is needed. Currently, the following versions are supported:</p>
<table>
<thead>
<tr>
<th>DFT code</th>
<th>Supported versions</th>
</tr>
</thead>
<tbody>
<tr>
<td>Quantum Espresso</td>
<td>&bull; 6.6 <br> &bull; 6.7MaX <br>&bull; 6.8</td>
</tr>
<tr>
<td>SIESTA</td>
<td>&bull; 4.1.5 <br> &bull; 5.0.0 <br> &bull; 5.0.1 <br> &bull; 5.0.2 <br> &bull; 5.2.0 <br> &bull; 5.2.1 <br> &bull; 5.2.2</td>
</tr>
</tbody>
</table>
<p>To build INTW to work with both DFT codes:</p>
<div class="codehilite"><pre><span></span><code>mkdir<span class="w"> </span>build
<span class="nb">cd</span><span class="w"> </span>build
<span class="nv">QE_HOME</span><span class="o">=</span>/path/to/QE<span class="w"> </span><span class="nv">SIESTA_HOME</span><span class="o">=</span>/path/to/SIESTA<span class="w"> </span>cmake<span class="w"> </span>..
make
</code></pre></div>

<p>If <code>QE_HOME</code> and <code>SIESTA_HOME</code> are defined as environmental variables CMake will use the value of the environmental variable.</p>
<p>If <code>QE_HOME</code> is not specified, CMake will disable the components related to QE automatically. Similarly, if <code>SIESTA_HOME</code> is not specified, the components related to SIESTA will be disabled.</p>
<h3 id="setting-a-specific-compiler-and-flags">Setting a specific compiler and flags</h3>
<p>CMake will find and select automatically the compilers and required libraries. However, it is possible to set a specific set of compilers using CMake's variable <code>CMAKE_&lt;LANG&gt;_COMPILER</code>:</p>
<div class="codehilite"><pre><span></span><code>cmake<span class="w"> </span>-DCMAKE_Fortran_COMPILER<span class="o">=</span>ifort<span class="w"> </span>..
</code></pre></div>

<p>Alternatively, the compiler can be specified using environmental variables:</p>
<div class="codehilite"><pre><span></span><code><span class="nb">export</span><span class="w"> </span><span class="nv">FC</span><span class="o">=</span>ifort<span class="w"> </span><span class="nv">CC</span><span class="o">=</span>icc
</code></pre></div>

<p>or</p>
<div class="codehilite"><pre><span></span><code><span class="nv">FC</span><span class="o">=</span>ifort<span class="w"> </span>cmake<span class="w"> </span>..
</code></pre></div>

<p>Similarly, CMake's variable <code>CMAKE_&lt;LANG&gt;_FLAGS</code> or <code>FFLAGS</code> and <code>CFLAGS</code> environmental variables can be used to set a specific set of compilation flags.</p>
<h2 id="dependencies">Dependencies</h2>
<h3 id="blaslapack-required">BLAS/LAPACK (required)</h3>
<p>BLAS and LAPACK libraries are found by CMake <code>find_package</code> modules. To set a specific BLAS/LAPACK library use <code>BLA_VENDOR</code> variable. For example, to enforce CMake to use OpenBLAS use:</p>
<div class="codehilite"><pre><span></span><code>cmake<span class="w"> </span>-DBLA_VENDOR<span class="o">=</span>OpenBLAS<span class="w"> </span>..
</code></pre></div>

<p>The complete list of allowed BLAS/LAPACK vendors, together with other options to find BLAS and LAPACK with CMake can be found <a href="https://cmake.org/cmake/help/latest/module/FindBLAS.html">here</a>.</p>
<h3 id="spglib-required-to-use-siesta">Spglib (required to use SIESTA)</h3>
<p><a href="https://spglib.readthedocs.io/">Spglib</a> is a C library for finding and handling crystal symmetries, which also has a Fortran interface.</p>
<p>When INTW is used in conjunction with SIESTA, Spglib is used to find crystal symmetries and use them to reduce computational costs. In particular, Spglib is a used by the following components of INTW:
- <code>siesta2ph</code>: Symmetries are used to reduce the required number of atomic displacements to completely determine the interatomic force constants and the induced potentials.
- <code>siesta2intw</code>: Symmetries are used to reduce the Brillouin zone sampling to the irreducible q-points.</p>
<p>CMake will attempt to download and build Spglib automatically inside the build directory of INTW. A working installation of Git is required for this process to work, since the library will be downloaded using Git. By default the original Spglib repository will be used, however, the user can override this by specifying an alternative repository via the <code>SPGLIB_GIT_REPOSITORY</code> variable (this is useful in case the library repository changes location):</p>
<div class="codehilite"><pre><span></span><code>cmake<span class="w"> </span>-DSPGLIB_GIT_REPOSITORY<span class="o">=</span><span class="s2">&quot;https://some.repository.url&quot;</span><span class="w"> </span>..
</code></pre></div>

<p>Similarly, while a tested version of the library is downloaded by default, the user can specify a different version by setting the <code>SPGLIB_GIT_TAG</code> variable:</p>
<div class="codehilite"><pre><span></span><code>cmake<span class="w"> </span>-DSPGLIB_GIT_TAG<span class="o">=</span><span class="s2">&quot;v2.6.0&quot;</span><span class="w"> </span>..
</code></pre></div>

<h3 id="triangle-and-tetgen-optional">triangle and tetgen (optional)</h3>
<p><a href="https://www.cs.cmu.edu/~quake/triangle.html">triangle</a> is a Two-Dimensional Quality Mesh Generator and Delaunay Triangulator. And <a href="https://wias-berlin.de/software/index.jsp?id=TetGen">tetgen</a> is a program to generate tetrahedral meshes of any 3D polyhedral domains.</p>
<p>Both, <code>triangle</code> and <code>tetgen</code> codes, are used by INTW's <code>triFS.x</code> utility to obtain a fully symmetric triangulated Fermi surface. In order to <code>triFS.x</code> be compiled, ensure that both codes are installed and available in your system's <code>PATH</code>. Both codes can be downloaded directly from their official websites or, alternatively, in some distributions they can also be installed from the system's package repositories. For example:</p>
<div class="codehilite"><pre><span></span><code><span class="c1"># Ubuntu</span>
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>triangle-bin<span class="w"> </span>tetgen
</code></pre></div>

<p>If <code>triangle</code> and <code>tetgen</code> executables are not found by CMake in the configuring step, <code>triFS.x</code> utility will not be compiled, however, the rest of the utilities will still be successfully built.</p>
<h3 id="openmp-optional">OpenMP (optional)</h3>
<p>Some parts of INTW are parallelized using OpenMP to take advantage of shared-memory multicore architectures. To use the parallelized version, ensure to compile INTW with OpenMP support enabled by setting <code>USE_OPENMP=ON</code> (by default OpenMP support is disabled):</p>
<div class="codehilite"><pre><span></span><code>cmake<span class="w"> </span>-DUSE_OPENMP<span class="o">=</span>ON<span class="w"> </span>..
</code></pre></div>

<p>Additionally, depending on the size of the calculation, it may be necessary to set the OpenMP environmental variable OMP_STACKSIZE to avoid segmentation faults. For example:</p>
<div class="codehilite"><pre><span></span><code><span class="c1">#Bash</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">OMP_STACKSIZE</span><span class="o">=</span><span class="s2">&quot;1GB&quot;</span>
</code></pre></div>

<h3 id="wannier90-optional">Wannier90 (optional)</h3>
<p>Wannier90 is used only in the test suite. Read <a href="#test-suite">Test suite</a> section for more information.</p>
<h3 id="python-3-optional">Python 3 (optional)</h3>
<p>Python 3 is used only in the test suite. Read <a href="#test-suite">Test suite</a> section for more information.</p>
<h2 id="test-suite">Test suite</h2>
<p>INTW's test suite can be executed by using <code>ctest</code>, an executable that is available with CMake. Alternatively, when using the Makefile generator, <code>make test</code> can be used also.</p>
<p>The test suite has 5 differentiated parts:
- <code>test_dummy</code>: It does not contain any actual code test at all, but consists of some simplified tests to serve as examples for developers when creating new tests.
- <code>test_IO</code>: To check the IO routines of INTW.
- <code>test_matrix_elements</code>: A set of tests on different systems to check the electron-phonon matrix element calculation with <code>ep_melements.x</code>.
- <code>test_mmn</code>: A set of tests on different systems to check the $A_{mn}$ and $M_{mn}$ matrices calculated with <code>intw2W90.x</code>.
- <code>test_w902intw</code>: A set of tests on different systems to check the interface <code>w902intw.x</code>.</p>
<h3 id="test-dependencies">Test dependencies</h3>
<p>Some components of the test suite need some specific software to be executed.</p>
<h4 id="python3-required">python3 (required)</h4>
<p>Since most tests use <code>python3</code> scripts to compare the results, if CMake does not find any <code>python3</code> executable, the whole test suite will be disabled.</p>
<h4 id="wannier90-required-for-test_mmn-and-test_w902intw">Wannier90 (required for <code>test_mmn</code> and <code>test_w902intw</code>)</h4>
<p><a href="http://www.wannier.org/">Wannier90</a> is used in <code>test_mmn</code> and <code>test_w902intw</code> scripts. Only the <code>wannier90.x</code> executable is needed, but the Wannier90 directory has to be specified to CMake:</p>
<div class="codehilite"><pre><span></span><code><span class="nv">W_HOME</span><span class="o">=</span>/path/to/WANNIER90<span class="w"> </span><span class="nv">QE_HOME</span><span class="o">=</span>/path/to/QE<span class="w"> </span><span class="nv">SIESTA_HOME</span><span class="o">=</span>/path/to/SIESTA<span class="w"> </span>cmake<span class="w"> </span>..
</code></pre></div>

<p>If <code>W_HOME</code> is not specified, <code>test_mmn</code> and <code>test_w902intw</code> will be disabled.</p>
<h4 id="qe-or-siesta-required-for-test_matrix_elements-test_mmn-and-test_w902intw">QE or SIESTA (required for <code>test_matrix_elements</code>, <code>test_mmn</code> and <code>test_w902intw</code>)</h4>
<p><code>test_matrix_elements</code>, <code>test_mmn</code> and <code>test_w902intw</code> tests run QE or SIESTA calculations, therefore, <strong>at least one</strong> of them must be specified to CMake, otherwise <code>test_matrix_elements</code>, <code>test_mmn</code> and <code>test_w902intw</code> will be disabled.</p>
        </div>
          <div class="col-md-4">
            <div class="card card-body bg-light">
              <h2 class="card-title">Developer Info</h2>
              <h4 class="card-text">INTW group</h4>
              <p class="card-text"></p>
                <div class="text-center"><div class="btn-group" role="group">
                    <a class="btn btn-lg btn-primary" href="https://www.ehu.eus/es/web/computational-many-body-theory/home"><i class="fa fa-globe fa-lg"></i></a>
                    
                    
                    
                    
                    
                    
                    
                </div></div>
            </div>
          </div>
      </div>
        <div class="row">
          <hr>
          <div class="col-xs-6 col-sm-4">
            <div>
              <h3>Source Files</h3>
              <ul><li><a href='sourcefile/a2f_on_trfs.f90.html'>a2F_on_trFS.f90</a></li><li><a href='sourcefile/all_wfcs.f90.html'>all_wfcs.f90</a></li><li><a href='sourcefile/cfftnd.f90.html'>cfftnd.f90</a></li><li><a href='sourcefile/ep_interp_on_trfs_dv.f90.html'>ep_interp_on_trFS_dV.f90</a></li><li><a href='sourcefile/ep_interp_on_trfs_wannier.f90.html'>ep_interp_on_trFS_wannier.f90</a></li><li><a href='sourcefile/ep_melements.f90.html'>ep_melements.f90</a></li><li><a href='sourcefile/fft.f90.html'>fft.f90</a></li><li><a href='sourcefile/fft_interp.f90.html'>fft_interp.f90</a></li><li><a href='sourcefile/geometry.f90.html'>geometry.f90</a></li><li><a href='sourcefile/input_parameters.f90.html'>input_parameters.f90</a></li></ul>
            </div>
            <div>
              <ul>
                <li><a href="./lists/files.html"><em>All source files&hellip;</em></a></li>
              </ul>
            </div>
          </div>
          <div class="col-xs-6 col-sm-4">
            <div>
              <h3>Modules</h3>
              <ul><li><a href='module/fftpack5.html'>fftpack5</a></li><li><a href='module/intw_allwfcs.html'>intw_allwfcs</a></li><li><a href='module/intw_fft.html'>intw_fft</a></li><li><a href='module/intw_fft_interp.html'>intw_fft_interp</a></li><li><a href='module/intw_input_parameters.html'>intw_input_parameters</a></li><li><a href='module/intw_intw2wannier.html'>intw_intw2wannier</a></li><li><a href='module/intw_matrix_elements.html'>intw_matrix_elements</a></li><li><a href='module/intw_matrix_vector.html'>intw_matrix_vector</a></li><li><a href='module/intw_ph.html'>intw_ph</a></li><li><a href='module/intw_ph_interpolate.html'>intw_ph_interpolate</a></li></ul>
            </div>
            <div>
              <ul>
                <li><a href="./lists/modules.html"><em>All modules&hellip;</em></a></li>
              </ul>
            </div>
          </div>
          <div class="col-xs-6 col-sm-4">
            <div>
              <h3>Procedures</h3>
              <ul><li><a href='proc/cfftmi.html'>cfftmi</a></li><li><a href='proc/cfftnd.html'>cfftnd</a></li><li><a href='proc/cmf2kb.html'>cmf2kb</a></li><li><a href='proc/cmf2kf.html'>cmf2kf</a></li><li><a href='proc/cmf3kb.html'>cmf3kb</a></li><li><a href='proc/cmf3kf.html'>cmf3kf</a></li><li><a href='proc/cmf4kb.html'>cmf4kb</a></li><li><a href='proc/cmf4kf.html'>cmf4kf</a></li><li><a href='proc/cmf5kb.html'>cmf5kb</a></li><li><a href='proc/cmf5kf.html'>cmf5kf</a></li></ul>
            </div>
            <div>
              <ul>
                <li><a href="./lists/procedures.html"><em>All procedures&hellip;</em></a></li>
              </ul>
            </div>
          </div>
        </div>
      <hr>
    </div> <!-- /container -->
    <footer>
      <div class="container">
        <div class="row justify-content-between">
          <div class="col">
            <p>
              INTW
 was developed by INTW group<br>              &copy; 2025 
</p>
          </div>
          <div class="col">
            <p class="text-end">
              Documentation generated by
              <a href="https://github.com/Fortran-FOSS-Programmers/ford">FORD</a>
            </p>
          </div>
        </div>
        <br>
      </div> <!-- /container -->
    </footer>
  </body>
</html>